# 🔧 دليل التحديث بعد النشر - خطوة بخطوة

---

## 🎯 **السيناريو: وجدت خطأ بعد النشر**

---

### **✅ الخطوة 1: تعديل الملف على جهازك**

```bash
# افتح المشروع في Cursor
# عدل الملف المطلوب
# احفظ التعديلات (Ctrl+S)
```

**مثال:** عدلت ملف `apps/web/src/app/[locale]/withdraw/page.tsx`

---

### **✅ الخطوة 2: اختبار التعديل محلياً (اختياري)**

```bash
cd apps/web
npm run dev
```

**افتح:** `http://localhost:3000`  
**تأكد:** الإصلاح يعمل

---

### **✅ الخطوة 3: رفع التعديل لـ GitHub**

```bash
# في Terminal:
git add .
git commit -m "fix: إصلاح رسوم السحب"
git push origin main
```

**⏱️ المدة:** 10-30 ثانية

---

### **✅ الخطوة 4: Vercel ينشر تلقائياً!** 🎉

**ماذا يحدث؟**

1. ✅ Vercel يكتشف التحديث على GitHub
2. ✅ يبدأ Build تلقائياً
3. ✅ ينشر النسخة الجديدة
4. ✅ موقعك يتحدث خلال 2-3 دقائق

**كيف تراقب؟**

- افتح: https://vercel.com/dashboard
- شاهد: "Building..." ثم "Ready ✓"

---

## 🚀 **مثال سريع - 60 ثانية:**

```bash
# خطوة 1: عدل الملف (10 ثوان)
# خطوة 2: في Terminal
git add .                              # 2 ثانية
git commit -m "fix: تحديث سريع"         # 3 ثوان
git push                                # 15 ثانية

# خطوة 3: انتظر Vercel (2-3 دقائق)
# ✅ تم! موقعك محدث
```

---

## 📊 **أنواع التعديلات:**

| النوع | مثال | الوقت |
|------|------|------|
| 🐛 **إصلاح خطأ** | تصحيح حساب رسوم | 2-3 دقائق |
| 🎨 **تعديل تصميم** | تغيير لون زر | 2-3 دقائق |
| ✨ **ميزة جديدة** | إضافة صفحة جديدة | 3-5 دقائق |
| 📝 **تعديل نصوص** | ترجمة جديدة | 2-3 دقائق |
| 🔐 **تحديث أمان** | تغيير سياسات | 2-3 دقائق |

---

## 🔐 **تعديلات حساسة (قاعدة البيانات):**

### **مثال: تغيير رسوم السحب في `policies.ts`**

```typescript
// قبل
weeklyFeePct: 7

// بعد
weeklyFeePct: 5  // خفضت من 7% لـ 5%
```

**الخطوات:**

```bash
# 1. عدل policies.ts
# 2. ارفع التحديث
git add apps/web/src/lib/policies.ts
git commit -m "update: تخفيض رسوم السحب لـ 5%"
git push

# 3. ✅ يطبق فوراً على جميع المستخدمين!
```

---

## ⚠️ **تعديلات Environment Variables:**

### **إذا احتجت تغيير `DATABASE_URL` أو `SESSION_SECRET`:**

**خطوات:**

1. ✅ اذهب لـ Vercel Dashboard
2. ✅ Project → Settings → Environment Variables
3. ✅ عدل المتغير المطلوب
4. ✅ اضغط "Redeploy" يدوياً

**⏱️ المدة:** 3-5 دقائق

---

## 🎯 **الخلاصة:**

### **✅ يمكنك التعديل:**
- ✅ كود برمجي (ملفات `.ts`, `.tsx`, `.json`)
- ✅ تصاميم (CSS, Tailwind)
- ✅ ترجمات (messages/ar.json, en.json...)
- ✅ سياسات (policies.ts)
- ✅ API Routes
- ✅ أي شيء في المشروع!

### **❌ ما لا يتحدث تلقائياً:**
- ❌ Environment Variables (تحتاج Redeploy يدوي)
- ❌ قاعدة البيانات نفسها (تحتاج Prisma Migrate)

---

## 🔥 **ميزة إضافية: Vercel Preview Deployments**

### **لكل `git push` يعمل Vercel نسختين:**

1. **🚀 Production:** الموقع الرسمي (yoursite.vercel.app)
2. **🧪 Preview:** نسخة تجريبية (yoursite-git-branch-username.vercel.app)

**الفائدة:** تختبر التعديل في Preview قبل ما ينطبق على Production!

---

## 📞 **لو صار خطأ كبير؟**

### **يمكنك الرجوع للنسخة السابقة خلال ثوان!**

**الخطوات:**

1. ✅ Vercel Dashboard → Deployments
2. ✅ اختر النسخة القديمة الشغالة
3. ✅ اضغط "Promote to Production"
4. ✅ تم! رجعت للنسخة القديمة خلال 30 ثانية

---

## 🎉 **الخلاصة النهائية:**

```
✅ نعم، يمكنك التعديل في أي وقت!
✅ التعديلات تنشر تلقائياً خلال 2-3 دقائق
✅ يمكنك الرجوع للنسخة القديمة بسهولة
✅ لا تحتاج تعيد النشر يدوياً
✅ يمكنك إضافة ميزات جديدة أو إصلاح أخطاء
✅ الموقع يعمل 24/7 حتى أثناء التحديث
```

---

**🔥 باختصار: عدل براحتك، Vercel يهتم بالباقي!** 🚀

